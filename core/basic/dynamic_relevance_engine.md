---
title: 동적 관련성 분석 엔진 (DRE)
description: AI가 현재 작업 중인 내용과 가장 관련성이 높은 과거 SCU 및 메모리 항목을 동적으로 식별하고 우선순위를 부여하는 엔진.
---

## 1. 관련성 판단 기준

DRE는 다음 기준들을 복합적으로 사용하여 메모리 항목의 관련성 점수를 계산합니다.

### 1.1. 시간적 근접성

*   **설명:** 현재 작업 중인 SCU와 시간적으로 가까운 과거 SCU에 높은 가중치를 부여합니다.
*   **가중치:** 높음

### 1.2. 등장인물 일치도

*   **설명:** 현재 작업 중인 SCU에 등장하는 캐릭터가 과거 SCU에도 등장했다면 관련성을 높게 평가합니다. SNER의 캐릭터 정보를 활용합니다.
*   **가중치:** 중간

### 1.3. 핵심 키워드 및 주제 유사도

*   **설명:** 현재 작업 내용(또는 작가의 질문)에서 추출된 키워드/주제가 과거 SCU의 `scene_title_or_summary`, `key_events_summary`와 유사할 경우 관련성을 높게 평가합니다. 간단한 TF-IDF 또는 임베딩 유사도를 활용할 수 있습니다.
*   **가중치:** 중간

### 1.4. 복선-회수 관계 (기초)

*   **설명:** 작가가 특정 복선 ID를 명시했거나, 시스템이 복선으로 추정되는 정보를 태깅했을 경우, 해당 복선과 관련된 과거 SCU의 관련성을 높입니다.
*   **가중치:** 높음 (선택적 심화)

## 2. DRE 기본 알고리즘

AI가 요청을 받을 때(예: 다음 내용 생성, 질문 답변), 현재 컨텍스트(작업 중인 SCU, 작가의 입력 등)를 분석하고 다음 단계를 수행합니다.

1.  **컨텍스트 분석:** 현재 작업 중인 SCU의 메타데이터(시간, 등장인물, 키워드 등)와 작가의 입력(질문, 지시 등)에서 핵심 정보를 추출합니다.
2.  **메모리 항목 순회:** 라이팅 메모리에 저장된 모든 SCU 및 주요 SNER 항목(캐릭터, 플롯 포인트, 세계관 요소)을 순회합니다.
3.  **관련성 점수 계산:** 각 메모리 항목에 대해 '1. 관련성 판단 기준'에 정의된 기준들을 적용하여 관련성 점수를 계산합니다. 각 기준별 가중치를 고려하여 최종 점수를 산출합니다.
4.  **상위 N개 선별:** 계산된 점수를 바탕으로 관련성이 높은 상위 N개의 메모리 항목을 선별합니다. (N은 시스템 설정에 따라 동적으로 조절 가능)
5.  **AI 응답 참조:** AI가 답변을 생성하거나 다음 내용을 제안할 때, 선별된 고관련성 메모리 항목들을 우선적으로 참조하도록 내부 로직을 수정합니다.

## 3. 성능 최적화 고려 사항

*   **단순화된 점수 계산:** 초기에는 복잡한 계산 대신 단순화된 점수 계산 방식을 사용하여 시스템 부하를 줄입니다.
*   **관련성 인덱스 사전 구축:** 주요 이벤트 발생 시(예: 새 SCU 저장 시) 관련성 인덱스를 미리 구축하여 실시간 계산 부담을 경감합니다.
*   **선택적 적용:** 모든 요청에 DRE를 적용하기보다는, 심층 분석이나 다음 스토리 제안과 같은 특정 유형의 요청에 우선적으로 적용합니다.